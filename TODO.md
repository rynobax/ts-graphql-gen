consider making type maps global instead of passing them
should this attempt to determine if you don't have fragment in document?
test on more real apps
add recipes to repo
readme
